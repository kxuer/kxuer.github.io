---
title: 笔记
date: 2022-10-25 11:46:11
permalink: /pages/7586ea/
categories:
  - 页面
  - JavaScript
tags:
  - 
author: 
  name: kxuer
  link: https://github.com/kxuer
---
# 笔记

## BOM和DOM

1. Javascript实现页面跳转的几种方式：[cnblogs](https://www.cnblogs.com/gh0408/p/6323631.html)

html页面定时跳转的两种方式，二选一即可（都是两秒后跳转到/）： 
一用js：setTimeout("javascript:location.href='/'", 2000);    
二用html标签：
```html
<!-- 不包裹在这里的话能让markdown页面两秒后跳转到/ -->
<meta http-equiv = "refresh" content = "2;url=/" >
```

## 内置对象

### Date日期

1. 返回 1970 年 1 月 1 日至2018-11-11的毫秒数: 

```js
new Date(“2018-11-11”).getTime()
```

### Array数组

1. 使用map方法过滤数组中的对象：[CSDN](https://blog.csdn.net/u011983028/article/details/74938827)

2. 数组末尾添加：
```js
//原来coord = [23, 111]
coord.concat(node.value, node.name)
// 之后coord = [23, 111, 9.7, '百度地图']
```

3. 删除数组中某条数据：
```js
this.tableData = [{...},{...}, ...]    //创建列表
deleteRow(row) {
  const i = this.tableData.findIndex((item) => item.id === row.id)    //找到对应数据在列表中的索引
  if (i >= 0) {
    this.tableData.splice(i, 1)
  }
}
```

### Number数值

1. 去掉小数部分：parseInt(from)

### 正则表达式

1. 常用的正则表达式：[runoob](https://c.runoob.com/front-end/854/) [csdn](https://blog.csdn.net/amberom/article/details/123705608)

2. 只提取字符串中汉字，并加空格连接在一起
```js
// 只提取汉字
GetChinese(strValue) { // eslint-disable-line
  if (strValue !== null && strValue !== '') {
    const reg = /[\u4e00-\u9fa5]/g;     //g表示全部匹配，不加则只匹配一次
    return strValue.match(reg).join(' ');    //加空格连接在一起
  }
  return '';
}
```

3. 判断密码满足大写字母，小写字母，数字和特殊字符，其中任意三种组合：[csdn](https://blog.csdn.net/wl_sqfn/article/details/85678063)
  [zhidao](https://zhidao.baidu.com/question/144240081601296165.html)


### JSON对象

1. js中读取解析json数据：[cnblogs](https://www.cnblogs.com/liutianzeng/p/10483449.html)

```js
var obj = JSON.parse(str); //由JSON字符串转换为JSON对象
var str = JSON.stringify(obj); //将JSON对象转化为JSON字符
```

## 杂项

1. 空格：`&nbsp;`


## jQuery

1. 选择器：

通配符选择器：

```js
$("input[name*='code']");//name属性包含code的所有input标签。
```
dom选择器筛选统计：
```js
document.querySelectorAll("a[href^='https://leetcode']")
```

2. [jQuery Validation plugin - Validating hidden inputs and not visible?](https://stackoverflow.com/questions/7952181/jquery-validation-plugin-validating-hidden-inputs-and-not-visible)

    清空input type="file"应该使用

    .val("");    //清空input,不是.value="";否则jQuery Validation无法感知到。

    手动触发input的change、input事件有点麻烦，貌似对jQuery Validation没什么用，所以手动验证一个element： 
    validator.element( "#myselect" );  //https://jqueryvalidation.org/Validator.element/

    与layUI合作的例子：
```js
laydate.render({
    elem: '#passportexpiration', //指定元素
    done: function(value, date, endDate){    //控件选择完毕后的回调
        validator.element( "#birth" );    //Validates a single element.
    } 
});
```

3. js input file文件上传图片并展示：

```html
<input type="file" accept="image/jpg,image/jpeg,image/png" name="identitypic" contenteditable="false" id="passfile1-0" onchange="fileChange(this);">
```

```js
function fileChange(target) {
    console.log(target);
    var fileSize = 0;
    fileSize = target.files[0].size;
    var size = fileSize / 1024;
    console.log("filesize: " + size);
    if(size>5000){
       alert("Max image size is 5M");
       target.val("");
       return false;   //阻止submit提交
    }
    var name=target.value;
    var fileName = name.substring(name.lastIndexOf(".")+1).toLowerCase();
    if(fileName !="jpg" && fileName !="jpeg" && fileName !="png"){
       alert("File format is not surported！");
       target.val("");
       return false;   //阻止submit提交
    }
    var file = target.files[0];
    if (window.FileReader) {
       var reader = new FileReader();
       reader.readAsDataURL(file);
       //监听文件读取结束后事件
       reader.onloadend = function (e) {
           console.log($(target).parent().prevAll(".display").children("img"));
           $(target).parent().prevAll(".display").children("img").attr("src", e.target.result);    //e.target.result就是最后的路径地址
           $(target).parent().prevAll(".upload").hide();
           $(target).parent().prevAll(".display").show();
           $(target).parent().prevAll(".photo-err").hide();
       };
   }
};
```

4. 生成json数组

```js
var datas = [];

for (x in res.result) { //x为键
    var data = {};
    $.extend(data, {"asset": x}, res.result[x]);
    datas.push(data);
}
```

5. 元素插入删除：
```js
// 在每个匹配的元素之后插入内容: 
$("p").after("<b>Hello</b>");     
$(element).closest(".form-group").after(error);
// 作为放到最后的子元素： 
$(element).closest(".form-group").append(error);
```

6. jquery禁用、启用button以及button的样式操作：[csdn](https://blog.csdn.net/qq_38455201/article/details/80591530)

## 其他库

1. 高精度浮点数计算： [bignumber.js](https://github.com/MikeMcl/bignumber.js)

2. 表单校验（与jquery配合使用）：jquery-validation

校验日期格式： date:true